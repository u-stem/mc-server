# 統合版（Nintendo Switch）

Nintendo Switch からサーバーに接続する手順です。

## 制限事項

Switch では以下の制限があります:

- 外部サーバーへの直接接続がネイティブでサポートされていない
- Tailscale をインストールできない
- BedrockTogether アプリが非対応

そのため、BedrockConnect（DNS方式）を使用して接続します。

> 注意: BedrockConnect は非公式な手段です。将来的な仕様変更により使用できなくなる可能性があります。

## 同じネットワーク内での接続

ホストと同じ Wi-Fi に接続している場合でも、BedrockConnect の設定が必要です。

## 外部ネットワークからの接続

ホスト側で Tailscale サブネットルーターを設定している場合のみ接続可能です。
設定されていない場合は、ホストに確認してください。

## BedrockConnect とは

BedrockConnect は、「特集サーバー」画面を経由して任意のサーバーに接続できるようにするツールです。
DNS を変更することで、特集サーバーへの接続を BedrockConnect のサーバーリスト画面にリダイレクトします。

詳細: [BedrockConnect GitHub](https://github.com/Pugmatt/BedrockConnect)

## 手順

### 1. DNS設定を変更

1. Switch のホーム画面から「設定」を開く
2. 「インターネット」→「インターネット設定」を選択
3. 接続中のネットワークを選択し「設定の変更」
4. 「DNS設定」を「手動」に変更
5. 以下を入力:
   - 優先DNS: `104.238.130.180`（BedrockConnect サーバー）
   - 代替DNS: `8.8.8.8`（Google DNS）
6. 「保存する」を選択

### 2. サーバーに接続

1. Minecraft を起動
2. 「遊ぶ」→「サーバー」タブを選択
3. 任意の特集サーバー（Hive など）を選択して接続
4. BedrockConnect のメニュー画面が表示される
5. 「Connect to a Server」を選択
6. サーバー情報を入力:
   - Server Address: サーバーの IP アドレス
   - Server Port: `19132`（またはホストから指定されたポート）
7. 「Add to server list」にチェックを入れると次回から入力不要
8. 「Submit」で接続

## 代替 DNS サーバー

メインの DNS サーバーに接続できない場合は、以下を試してください:

- `45.55.68.52`
- その他のサーバーは [BedrockConnect GitHub](https://github.com/Pugmatt/BedrockConnect) で確認

## 接続情報

ホストから以下の情報を受け取ってください:

| 項目 | 確認内容 |
|------|----------|
| サーバーアドレス | ローカルIP または Tailscale経由のIP |
| ポート番号 | 通常は 19132（UDP） |
| サーバータイプ | Bedrock専用 または GeyserMC（Java版） |

## トラブルシューティング

### BedrockConnect の画面が表示されない

- DNS設定が正しく保存されているか確認
- インターネット接続を一度切断して再接続
- 代替DNSサーバーを試す

### サーバーに接続できない

- サーバーアドレスとポートが正しいか確認
- サーバーが起動しているかホストに確認
- 外部ネットワークの場合、ホストがサブネットルーターを設定しているか確認

### 「世界に接続できませんでした」と表示される

- サーバーアドレスとポートを再確認
- 時間をおいて再試行

### GeyserMC サーバーでログインできない

- Floodgate 使用時は、プレイヤー名の前にプレフィックス（通常 `.`）が必要な場合があります
- ホワイトリストに `.あなたの名前` の形式で登録されているか確認

## 注意事項

- DNS設定を変更しても、他のゲームやアプリには影響しません（代替DNSとしてGoogle DNSを設定しているため）
- 長期間 Minecraft をプレイしない場合は、DNS設定を元に戻すことを推奨します
- IPv6 環境では BedrockConnect が動作しない場合があります
